{"version":3,"file":"static/webpack/static/development/pages/play.js.b1a2ab43235dab34dc4f.hot-update.js","sources":["webpack:///./src/pages/play.js"],"sourcesContent":["import { useEffect } from 'react';\nimport * as yaksok from 'yaksok';\nimport Head from 'next/head';\n\nfunction Page() {\n    useEffect(() => {\n        var srcEditor = ace.edit('src-editor');\n        var dstEditor = ace.edit('dst-editor');\n        var compiler = new yaksok.compiler.JsTargetCompiler();\n        compiler.plugins.add(new yaksok.plugin.ConstantFolder({ dce: true }));\n        compiler.plugins.add(new yaksok.plugin.UnusedDefRemover());\n        var current = 0;\n        var lastModified = 0;\n        var compiling = false;\n        function compile() { lastModified = +(new Date()); }\n        function editorConfig(editor, option) {\n            editor.setOptions({\n                selectionStyle: 'text',\n                useSoftTabs: true,\n                highlightActiveLine: false,\n                showPrintMargin: false,\n                theme: 'ace/theme/monokai'\n            });\n            if (option) {\n                editor.setOptions(option);\n            }\n        }\n        { // src config\n            editorConfig(srcEditor);\n            var YaksokMode = ace.require('ace/mode/yaksok').Mode;\n            srcEditor.getSession().setMode(new YaksokMode());\n        }\n        { // dst config\n            editorConfig(dstEditor, {\n                readOnly: true,\n                mode: 'ace/mode/javascript'\n            });\n        }\n        function loadExample(file) {\n            $.ajax({\n                url:'./examples/' + file,\n                dataType: 'text'\n            }).done(function (data) {\n                srcEditor.setValue(data);\n                srcEditor.execCommand('gotoend');\n            });\n        }\n        loadExample($('#examples').val());\n        $('#examples').on('change', function () { loadExample($(this).val()); });\n        $('#run-babel').on('change', compile);\n        srcEditor.getSession().on('change', compile);\n        setInterval(function () {\n            if (current > lastModified) return;\n            if (compiling) return;\n            compiling = true;\n            compiler.compile(srcEditor.getValue())\n            .then(function (js) {\n                if ($('#run-babel').prop('checked')) js = babel.transform(js).code;\n                dstEditor.setValue(js);\n                dstEditor.execCommand('gotoend');\n                current = +(new Date());\n                compiling = false;\n            })\n            .catch(function (err) {\n                var msg = ((err instanceof Error || err.message) ? err.message : err) + '';\n                dstEditor.setValue(msg);\n                dstEditor.execCommand('gotoend');\n                current = +(new Date());\n                compiling = false;\n            });\n        }, 1);\n        $('#run').on('click', function () {\n            eval(dstEditor.getValue());\n        });\n    }, []);\n    return <>\n        <Head>\n        <script src=\"https://code.jquery.com/jquery-1.11.3.min.js\"></script>\n        <script src=\"https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.32/browser-polyfill.min.js\"></script>\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.32/browser.min.js\"></script>\n        </Head>\n        <div className=\"wrap\">\n            <div className=\"col left\">\n                <div className=\"row\">\n                    <div className=\"title\">약속 소스코드</div>\n                    <select id=\"examples\">\n                        <option value=\"fibonacci.yak\">피보나치</option>\n                        <option value=\"bubble-sort.yak\">버블소트</option>\n                    </select>\n                </div>\n                <div id=\"src-editor\" className=\"editor\"></div>\n            </div>\n            <div className=\"col right\">\n                <div className=\"row\">\n                    <div className=\"title\">자바스크립트 결과코드</div>\n                    es5: <input type=\"checkbox\" id=\"run-babel\" checked/>\n                    <button id=\"run\">실행하기</button>\n                </div>\n                <div id=\"dst-editor\" className=\"editor\"></div>\n            </div>\n        </div>\n        <style global jsx>{`\n            .wrap {\n                margin: 0 auto;\n                max-width: 1024px;\n                width: calc(100% - 40px);\n                height: calc(100% - 20px);\n            }\n            .col {\n                width: calc(50% - 5px);\n                height: 100%;\n            }\n            .col.left { float: left; }\n            .col.right { float: right; }\n            .row {\n                margin: 5px 0;\n                width: 100%;\n                height: 30px;\n            }\n            .row .title {\n                display: inline-block;\n                height: 100%;\n                padding: 1px 5px;\n                font-size: 18px;\n                font-weight: lighter;\n            }\n            .editor {\n                width: 100%;\n                height: calc(100% - 40px);\n            }\n        `}</style>\n    </>;\n}\n\nexport default Page;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AACA;AAMA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AAFA;AAIA;AACA;AAAA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAvBA;AAAA;AAAA;AAyDA;AACA;AACA;;;;A","sourceRoot":""}